# 行文与格式风格指南

## 总体风格

- 面向初学者：不默认读者知道"为什么要这样做"。
- 小步快跑：每节只讲一个主点，配一个最小例子。
- 工程化：每个重要结论都可验证（tests 或 anchors）。
- **叙事优先**：像写故事一样写教材，不是在填模板。

## 写作口吻与节奏（反"模板感/AI味"）

目标：读起来像真人老师写的教材，而不是"模板填空"。

**详细的好/坏范例见 `shared/writing_exemplars.md`**——所有写正文的 agent 在动笔前必须读。

### 核心节奏要求

- **场景开头**：每节用一个具体情境、问题或从上一节的自然过渡开头。绝不用"在本节中，我们将…"。
- **问题驱动**：先让读者感受到"我需要解决这个问题"，再引出概念。概念是答案，不是前提。
- **句子长短交替**：长句解释背景，短句敲定结论。"所以记住：`input()` 返回的永远是字符串。"
- **段落优先于列表**：能用 2-3 句话说清楚的事，不要拆成 bullet list。连续列表不超过 5 条。
- **过渡要自然**：节与节之间不能只靠 `---` 分隔。收束当前节时自然带出下一节的需求。

### 每节必须覆盖的要素（但形式灵活）

每节需要自然地包含以下内容，但**不要求使用固定的子标题模式**：

1. 读者为什么需要这个概念（动机）
2. 至少一个可运行的代码示例
3. 至少一个错误场景（在叙事中自然出现）
4. 本节与前后节的连接

### 写法示范（before / after）

**❌ 坏：概念先行 + bullet 小结**

> ## 变量与赋值
>
> 变量的作用就是给数据"贴标签"。
>
> ```python
> name = "Alice"
> ```
>
> ### 小结
> - 变量是数据的标签
> - 用 `=` 赋值
> - 变量名区分大小写

**✅ 好：场景驱动 + 叙述收束**

> ## 让程序记住东西
>
> 上一节你让 Python 说了 Hello——但说完就忘了。如果你想先问用户叫什么，再用名字打招呼呢？
>
> ```python
> name = input("你叫什么？")
> print("你好，" + name)
> ```
>
> `name` 就是一个变量——你给一个值取了个名字，后面的代码随时可以用。
>
> 现在你的程序能记东西了。下一个问题：如果记住的是数字，你能拿它做运算吗？

### 禁止事项

- 反复使用同一种开场句式（如每节都"在本节中…"）
- 每节都用相同的子标题结构（如"最小正例""常见错误""小结"）
- 连续 6+ 条 bullet list
- 元话语（"作为一个 AI…""接下来我会…"）
- 说教标签（"注意：""重要提示：""关键点："）
- 夸大 AI 能力或给出未经验证的事实

## 贯穿案例（每章必须）

每章围绕一个渐进式小项目展开。详见 `shared/writing_exemplars.md` 的范例 5。

要求：
- 每节结束时，读者手里的项目都是可运行的
- 每节在上一节基础上推进一步
- 章末读者拿到一个有意义的"小成果"

## Markdown 规范

- 章节标题：`# week_XX：标题`（目录名也是 `week_XX/`）
- 小节用 `##`，子节用 `###`，避免跳级
- 小节标题用**动词/疑问句式**，不用干巴巴的概念名词
  - ❌ "变量与赋值"  ✅ "让程序记住东西"
  - ❌ "输入与输出"  ✅ "跟用户聊起来"
- 代码块必须标注语言：```python / ```bash / ```text

## 代码示例规范

- 示例优先放 `examples/`，正文只引用关键片段或给出运行命令。
- 代码不能孤零零地出现。前面要有"为什么写这段代码"，后面要有"运行后会看到什么"。
- 每个例子要说明：
  - 输入是什么
  - 输出是什么
  - 常见错误是什么（至少 1 个，在叙事中自然出现）

## 术语规范

- 首次出现：中文 + （英文）
- 需要统一写法的术语必须入 `TERMS.yml` 并合入 `shared/glossary.yml`

## 周间衔接

- 每周 CHAPTER.md 末尾必须有"## 本周小结（供下周参考）"段落（2-3 句话概括核心内容 + 展望下周）。
- 非 week_01 的 CHAPTER.md 开头应有"前情提要"过渡段（2-4 句话自然带入，不要机械复制上周小结）。
- 详见 `shared/week_summary_template.md`。

## 图表（可选）

能用短代码或伪代码表达就不要画复杂图。必须画图时，优先 Mermaid。

## Git 本周要点（固定盒子模板）

每周 `CHAPTER.md` 建议包含以下固定段落（复制后再按本周内容替换）。

```text
## Git 本周要点

本周必会命令：
- git status
- git diff
- git add -A
- git commit -m "draft: ..."
- git log --oneline -n 10

常见坑：
- 只改文件不提交：下周找不到"当时怎么改的"。至少做 draft + verify 两次提交。

Pull Request (PR)：
- Gitea 上也叫 Pull Request，流程等价 GitHub：push 分支 -> 开 PR -> review -> merge。
```

## AI 时代小专栏（可选，但推荐）

目的：给初学者一个"时代背景"，理解近两年（约 24 个月）AI 对编程方式的影响，但不喧宾夺主。

要求：
- 每章 1-2 个侧栏即可；每个 200-500 字。
- 必须和本周主题有连接点（例如：Week 01 的"验证/测试"如何成为 AI 编程的护栏）。
- 如涉及事实性表述（年份/出处/数据等），尽量给 2-5 条参考链接，并写明访问日期。
- 如果无法联网：写 TODO，不要编造。

模板：

```text
> **AI 时代小专栏：标题**
> ...（200-500 字，连接本周主题）
> 参考（访问日期：YYYY-MM-DD）：
> - https://...
```
